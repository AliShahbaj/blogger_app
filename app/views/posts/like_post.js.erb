<%@like = Like.where(user_id: current_user.id, post_id: @post.id).try(:first)%>
<%if @like.present? %>
  <% js = escape_javascript(render(partial: "posts/like_post", locals: {likes: @post.likes.count})) %>
  document.getElementsByClassName('like-btn')[0].className = "like-btn liked";
  document.getElementsByClassName('icon_text')[0].innerText = "Unlike";
  $like_div = $("#like_div");
  $like_div.html("<%= js %>");
<%else%>
  <% js = escape_javascript(render(partial: "posts/like_post", locals: {likes: @post.likes.count})) %>
  document.getElementsByClassName('like-btn')[0].className = "like-btn";
  document.getElementsByClassName('icon_text')[0].innerText = "Like";
  $like_div = $("#like_div");
  $like_div.html("<%= js %>");
<%end%>